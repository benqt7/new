<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <!-- Ù…Ù‡Ù… Ù„Ù„Ø¬ÙˆØ§Ù„ -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø³ØªØ¨ÙŠØ§Ù† Ù…ÙˆØ§Ø¡Ù…Ø©</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- EmailJS -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script>
        (function() {
            emailjs.init("FBtLPMoiYjdHUSr4J");
        })();
    </script>

    <style>
        * { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }

        .section-card { transition: all 0.3s ease; }
        .section-card:hover { transform: translateY(-2px); }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ‚ÙŠÙŠÙ… â€“ ÙƒØ¨Ø³ÙˆÙ„Ø§Øª Ù…ØªØ¯Ø±Ø¬Ø© Ù…Ø¹ Ø´Ø§Ø¯Ùˆ */
        .option-btn {
            transition: all 0.18s ease-out;
            border-radius: 999px !important; /* ÙƒØ¨Ø³ÙˆÙ„Ø© */
            background: linear-gradient(145deg, #e5e7eb, #f9fafb);
            box-shadow:
                0 2px 5px rgba(15, 23, 42, 0.12),
                0 0 0 1px rgba(148, 163, 184, 0.6);
        }

        .option-btn:hover {
            transform: translateY(-1px) scale(1.03);
            box-shadow:
                0 6px 16px rgba(15, 23, 42, 0.18),
                0 0 0 1px rgba(129, 140, 248, 0.8);
        }

        /* Ø§Ù„Ø£Ø³Ø§Ø³ Ù„Ù…Ø§ ÙŠÙƒÙˆÙ† Ø§Ù„Ø²Ø± Ù…Ø®ØªØ§Ø±: Ù†ÙØ³ Ø§Ù„Ø­Ø±ÙƒØ© ÙˆØ§Ù„Ø´Ø§Ø¯Ùˆ */
        .option-btn.selected {
            transform: translateY(-1px) scale(1.05);
            color: #ffffff !important;
            box-shadow:
                0 10px 25px rgba(15, 23, 42, 0.35),
                0 0 0 1px rgba(191, 219, 254, 0.9);
        }

        /* ØªØ®ØµÙŠØµ Ø§Ù„Ø£Ù„ÙˆØ§Ù† Ù„ÙƒÙ„ Ù†ÙˆØ¹ Ø§Ø®ØªÙŠØ§Ø± Ù…Ø¹ Ù†ÙØ³ Ø´ÙƒÙ„ Ø§Ù„Ø¬radient */
        .option-btn.selected.bg-green-500 {
            background: radial-gradient(circle at top left, #16a34a, #22c55e); /* Ù†Ø¹Ù… */
        }

        .option-btn.selected.bg-yellow-500 {
            background: radial-gradient(circle at top left, #f59e0b, #fbbf24); /* Ø¬Ø²Ø¦ÙŠØ§Ù‹ */
        }

        .option-btn.selected.bg-red-500 {
            background: radial-gradient(circle at top left, #ef4444, #dc2626); /* Ù„Ø§ */
        }

        /* Ø´Ø±ÙŠØ· Ø§Ù„Ø´Ø±ÙƒØ§Ø¡ Ø§Ù„Ù…ØªØ­Ø±Ùƒ */
        .partners-marquee {
            overflow: hidden;
            position: relative;
            direction: ltr; /* Ø¹Ø´Ø§Ù† Ø§ØªØ¬Ø§Ù‡ Ø§Ù„Ø­Ø±ÙƒØ© Ù…Ø§ ÙŠØªØ£Ø«Ø± Ø¨Ù€ RTL Ù„Ù„ØµÙØ­Ø© */
            background: linear-gradient(to bottom, #f9fafb, #ffffff);
            padding: 2rem 0;
            border-radius: 1rem;
        }

        /* ØªØ£Ø«ÙŠØ± fade Ù…ØªÙ…Ø§Ø«Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø§Ù†Ø¨ÙŠÙ† - Ø§Ù„Ø¯Ø®ÙˆÙ„ ÙˆØ§Ù„Ø®Ø±ÙˆØ¬ Ø¨Ù†ÙØ³ Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© */
        .partners-marquee::before,
        .partners-marquee::after {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            width: 150px; /* Ù…Ø³Ø§ÙØ© Ø£ÙƒØ¨Ø± Ù„Ù„Ù€ fade */
            z-index: 2;
            pointer-events: none;
        }

        .partners-marquee::before {
            left: 0;
            background: linear-gradient(to right, rgba(249, 250, 251, 1) 0%, rgba(249, 250, 251, 0.8) 40%, rgba(249, 250, 251, 0) 100%);
        }

        .partners-marquee::after {
            right: 0;
            background: linear-gradient(to left, rgba(249, 250, 251, 1) 0%, rgba(249, 250, 251, 0.8) 40%, rgba(249, 250, 251, 0) 100%);
        }

        .partners-marquee-track {
            display: flex;
            gap: 3rem; /* Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª */
            width: max-content;
            /* Ø­Ø±ÙƒØ© Ø¨Ø·ÙŠØ¦Ø© ÙˆÙ…Ø±ÙŠØ­Ø© */
            animation: partners-marquee 50s linear infinite;
            will-change: transform; /* ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡ */
        }

        .partners-marquee-track:hover {
            animation-play-state: paused; /* ØªÙˆÙ‚Ù Ø¹Ù†Ø¯ Ø§Ù„ÙˆÙ‚ÙˆÙ Ø¨Ø§Ù„Ù…Ø§ÙˆØ³ */
        }

        /* Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª Ø¨Ø£Ù„ÙˆØ§Ù†Ù‡Ø§ Ø§Ù„Ø£ØµÙ„ÙŠØ© Ø¨Ø¯ÙˆÙ† ØªØ£Ø«ÙŠØ±Ø§Øª */
        .partners-marquee-track > div {
            flex-shrink: 0; /* Ù…Ù‡Ù…: Ù…Ù†Ø¹ Ø§Ù†ÙƒÙ…Ø§Ø´ Ø§Ù„Ø¹Ù†Ø§ØµØ± */
            transition: transform 0.3s ease;
        }

        /* ØªÙƒØ¨ÙŠØ± Ø®ÙÙŠÙ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­ÙˆÙŠÙ… ÙÙ‚Ø· */
        .partners-marquee-track > div:hover {
            transform: scale(1.1);
        }

        /* Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù†: Ø­Ø±ÙƒØ© Ø¨Ø·ÙŠØ¦Ø© ÙˆÙ…Ø³ØªÙ…Ø±Ø© */
        @keyframes partners-marquee {
            0%   { transform: translateX(0); }    /* ÙŠØ¨Ø¯Ø£ Ù…Ù† Ù…ÙˆØ¶Ø¹Ù‡ - ÙŠØ¸Ù‡Ø± Ù…Ø¨Ø§Ø´Ø±Ø© */
            100% { transform: translateX(-50%); } /* ÙŠØªØ­Ø±Ùƒ Ù†ØµÙ Ø§Ù„Ù…Ø³Ø§ÙØ© - ØªÙƒØ±Ø§Ø± Ø³Ù„Ø³ */
        }

        .form-card > * {
            position: relative;
            z-index: 1;
        }

        /* Ø§Ù„Ø´Ø¹Ø§Ø± ÙƒÙ€ watermark ÙÙŠ ÙˆØ³Ø· Ø§Ù„Ø¨Ø·Ø§Ù‚Ø© */
        .form-card::before {
            content: "";
            position: absolute;
            inset: 0;
            /* background: url('https://i.postimg.cc/43VmrJLc/shÊ¿artmhyr.png') no-repeat center center; */
            background-size: 420px auto;
            opacity: 0.19;
            pointer-events: none;
        }

        /* Ø§Ù„Ø´Ø¹Ø§Ø± ÙÙŠ ÙƒÙ„ Ø§Ù„ØµÙØ­Ø§Øª ÙŠÙƒÙˆÙ† Ø«Ø§Ø¨Øª ÙˆÙˆØ§Ø¶Ø­ ÙÙˆÙ‚ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
        #surveyPage.form-card::before,
        #resultsPage.form-card::before,
        #infoPage.form-card::before {
            position: fixed;   /* ÙŠØ«Ø¨Øª Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø© Ù…Ø¹ Ø§Ù„Ø³ÙƒØ±ÙˆÙˆÙ„ */
            inset: 0;
            z-index: 10;       /* ÙÙˆÙ‚ Ø§Ù„Ø£Ø²Ø±Ø§Ø± ÙˆØ§Ù„ÙƒØ±ÙˆØª */
        }

        .btn-next {
            background-image: linear-gradient(to right, #37a1a1, #2c3145);
        }

        .btn-next:hover {
            filter: brightness(1.06);
        }

        .progress-gradient {
            background-image: linear-gradient(to right, #37a1a1, #2c3145);
        }

        .section-title {
            color: #000000;              /* Ù„ÙˆÙ† Ø§Ù„Ù†Øµ */
            border-bottom: 2px solid #000; /* Ù„ÙˆÙ† Ø§Ù„Ø­Ø¯ Ø§Ù„Ø³ÙÙ„ÙŠ */
        }

        .badge-gradient {
            background-image: linear-gradient(to right, #37a1a1, #2c3145);
        }

        /* ===== Top Dark Banner (Ù…Ø«Ù„ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©) ===== */
        .top-banner-wrap { position: relative; z-index: 20; }
        .top-banner {
            background: linear-gradient(90deg, #2c3145 0%, #2c3145 55%, #2c3145 100%);
            border: 1px solid rgba(255, 255, 255, 0.10);
            box-shadow: 0 18px 40px rgba(15, 23, 42, 0.22);

            border-bottom-left-radius: 0 !important;
            border-bottom-right-radius: 0 !important;
        }
        .top-banner-title {
            color: #86efac;
            text-shadow: 0 2px 12px rgba(0, 0, 0, 0.35);
        }
        .top-banner-hint {
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid rgba(255, 255, 255, 0.12);
        }

        /* ===== Gauge (Ø´ÙƒÙ„ Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©) ===== */
        .levelCardModern {
            background: #ffffff;
            border: 1px solid rgba(15, 23, 42, 0.08);
            box-shadow: 0 10px 30px rgba(15, 23, 42, 0.06);
        }

        /* ØªÙƒØ¨ÙŠØ± Ø§Ù„Ù‚ÙˆØ³ */
        .gaugeWrap {
            width: 100%;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .gauge {
            position: relative;
            width: min(420px, 100%);
            height: 240px;
        }

        .gaugeSvg {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
        }

        .gaugeBg {
            stroke: #e5e7eb;
            stroke-width: 20;
            fill: none;
            stroke-linecap: round;
        }

        .gaugeFg {
            stroke-width: 20;
            fill: none;
            stroke-linecap: round;
            stroke-dasharray: 1;
            stroke-dashoffset: 1;
            transition: stroke-dashoffset 700ms ease;
        }

        .gaugeInnerShadow {
            stroke: rgba(15, 23, 42, 0.08);
            stroke-width: 30;
            fill: none;
            stroke-linecap: round;
            filter: blur(0.2px);
            opacity: 0.25;
        }

        /* ØªÙ„ÙˆÙŠÙ† Ø§Ù„Ù‚ÙˆØ³ Ø­Ø³Ø¨ Ù†ÙˆØ¹Ù‡ */
        .gaugeFgLevel { stroke: url(#gaugeGradLevel); }
        .gaugeFgTotal { stroke: url(#gaugeGradTotal); }

        .gaugeCenter {
            position: absolute;
            left: 50%;
            top: 62%;
            transform: translate(-50%, -50%);
            text-align: center;
            width: 100%;
            pointer-events: none;
        }

        .gaugeScore {
            font-weight: 900;
            color: #0f172a;
            font-size: clamp(22px, 4.2vw, 40px);
            line-height: 1;
            direction: ltr;
            unicode-bidi: isolate;
            display: flex;
            align-items: baseline;
            justify-content: center;
            gap: 10px;
            white-space: nowrap;
            margin-bottom: 10px;
        }

        .gaugeScore small,
        .gaugeSep {
            font-size: clamp(18px, 3vw, 30px);
            font-weight: 900;
            opacity: 0.9;
        }

		/* Ø¨Ø¯Ù„ Ø¨Ù„ÙˆÙƒ .gaugeBadge Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ */
		.gaugeBadge{
		  display:inline-flex;
		  align-items:center;
		  justify-content:center;

		  height: 46px;              /* ÙŠØ¹Ø·ÙŠÙ‡ Ø´ÙƒÙ„ â€œÙ…Ø³ØªØ·ÙŠÙ„â€ Ø«Ø§Ø¨Øª */
		  padding: 0 34px;           /* Ø¹Ø±Ø¶ Ù…Ø­ØªØ±Ù… */
		  min-width: 150px;          /* ÙŠØ®Ù„ÙŠ "Ø¥Ø¬Ù…Ø§Ù„ÙŠ" Ùˆ "Ù…ØªÙˆØ³Ø·" Ù†ÙØ³ Ø§Ù„Ù…Ù‚Ø§Ø³ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹ */

		  border-radius: 14px;       /* Ù‡Ø°Ø§ Ø§Ù„Ù…Ù‡Ù…: Ù…Ùˆ 999px */
		  font-weight: 900;
		  font-size: clamp(16px, 2.6vw, 22px);
		  color:#fff;

		  /* âœ… Ù†ÙØ³ Ø§Ù„ØªØ¯Ø±Ù‘Ø¬ (Ù…Ø«Ù„ Ø§Ù„Ù‚ÙˆØ³) */
		  background: linear-gradient(90deg, var(--badge1, #2563eb), var(--badge2, #1d4ed8));

		  box-shadow: 0 12px 30px rgba(15, 23, 42, 0.16);
		}

        /* Fallback Ù„Ùˆ Ù…Ø§ Ø§Ù†Ø±Ø³Ù„Øª Ù…ØªØºÙŠØ±Ø§Øª */
        .gaugeBadge.is-excellent { --badge1:#16a34a; --badge2:#22c55e; } /* Ù…Ù…ØªØ§Ø² */
        .gaugeBadge.is-verygood  { --badge1:#22c55e; --badge2:#86efac; } /* Ø¬ÙŠØ¯ Ø¬Ø¯Ù‹Ø§ */
        .gaugeBadge.is-average   { --badge1:#f59e0b; --badge2:#fbbf24; } /* Ù…ØªÙˆØ³Ø· */
        .gaugeBadge.is-weak      { --badge1:#dc2626; --badge2:#ef4444; } /* Ø¶Ø¹ÙŠÙ */
        .gaugeBadge.is-total     { --badge1:#2563eb; --badge2:#1d4ed8; } /* Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ */
/* Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ */

        .gaugeDesc {
            font-weight: 900;
            color: #0f172a;
            font-size: clamp(18px, 3.2vw, 26px);
            line-height: 1.25;
            text-align: center;
            margin-top: -6px;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">

    <!-- Toast / Notification -->
    <div id="toastWrapper" class="fixed inset-x-0 top-4 flex justify-center z-50 pointer-events-none hidden">
        <div id="toast"
             class="pointer-events-auto max-w-xs sm:max-w-sm px-4 py-3 rounded-xl shadow-lg text-sm sm:text-base flex items-center gap-2">
            <span id="toastIcon">âœ…</span>
            <span id="toastMessage">ØªÙ… Ø¨Ù†Ø¬Ø§Ø­</span>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© ØªØ£ÙƒÙŠØ¯ Ø·Ù„Ø¨ Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø© -->
    <div id="contactModal"
        class="fixed inset-0 z-50 hidden items-center justify-center bg-black/40 px-4">
        <div class="bg-white rounded-2xl w-full max-w-md p-5 sm:p-6 shadow-2xl">
            <div class="flex items-center justify-between mb-3">
                <h3 id="consultationTitle" class="text-lg sm:text-xl font-bold text-gray-800">
                    ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø© âœ…
                </h3>
                <button type="button"
                        onclick="closeContactModal()"
                        class="text-gray-400 hover:text-gray-600 text-xl leading-none">
                    âœ•
                </button>
            </div>

            <p id="consultationDesc" class="text-sm sm:text-base text-gray-700 mb-3">
                ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø·Ù„Ø¨ Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø©ØŒ ÙˆÙ‡Ø°Ù‡ Ù‡ÙŠ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù†Ø´Ø£ØªÙƒ:
            </p>

            <div class="space-y-2 mb-4">
                <div class="bg-indigo-50 border border-indigo-200 rounded-xl px-3 py-2">
                    <p class="text-xs text-gray-500 mb-1">Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø´Ø£Ø©</p>
                    <p id="contactFacilityName" class="font-semibold text-indigo-700 text-sm sm:text-base"></p>
                </div>

                <div class="bg-indigo-50 border border-indigo-200 rounded-xl px-3 py-2">
                    <p class="text-xs text-gray-500 mb-1">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</p>
                    <p id="contactEmail" class="font-semibold text-indigo-700 text-sm sm:text-base"></p>
                </div>

                <div class="bg-indigo-50 border border-indigo-200 rounded-xl px-3 py-2">
                    <p class="text-xs text-gray-500 mb-1">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„</p>
                    <p id="contactPhone" class="font-semibold text-indigo-700 text-sm sm:text-base"></p>
                </div>

                <div class="bg-indigo-50 border border-indigo-200 rounded-xl px-3 py-2">
                    <p class="text-xs text-gray-500 mb-1">Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</p>
                    <p id="contactRegion" class="font-semibold text-indigo-700 text-sm sm:text-base"></p>
                </div>

                <div class="bg-indigo-50 border border-indigo-200 rounded-xl px-3 py-2">
                    <p class="text-xs text-gray-500 mb-1">Ø­Ø¬Ù… Ø§Ù„Ù…Ù†Ø´Ø£Ø©</p>
                    <p id="contactSize" class="font-semibold text-indigo-700 text-sm sm:text-base"></p>
                </div>
            </div>

            <button type="button"
                    onclick="closeContactModal()"
                    class="w-full border border-gray-300 text-gray-700 py-2.5 sm:py-3 rounded-xl text-sm sm:text-base font-semibold hover:bg-gray-50 transition-all">
                Ø¥ØºÙ„Ø§Ù‚
            </button>
        </div>
    </div>

    <!-- container ÙˆØ§Ø­Ø¯ Ù„ÙƒÙ„ Ø§Ù„ØµÙØ­Ø§Øª -->
    <div class="container mx-auto max-w-4xl px-4 py-4 sm:px-6 sm:py-6">

        <!-- Page 1: Personal Info -->
        <div id="infoPage" class="form-card bg-white rounded-2xl shadow-2xl p-4 sm:p-6 md:p-8 relative overflow-hidden">
            <!-- Top Dark Banner -->
            <div class="top-banner-wrap -mx-4 sm:-mx-6 md:-mx-8 -mt-4 sm:-mt-6 md:-mt-8 mb-5 sm:mb-7">
                <div class="top-banner rounded-2xl sm:rounded-3xl px-4 py-4 sm:px-6 sm:py-6">
                    <div class="flex items-center justify-center">
                        <img src="https://i.postimg.cc/pdX7NfWt/t.png" alt="Logo" loading="eager" decoding="async"
                             class="h-20 sm:h-24 md:h-28 w-auto object-contain drop-shadow-[0_10px_22px_rgba(0,0,0,0.35)]">
                    </div>
                </div>
            </div>

            <div class="text-center mb-6 sm:mb-8">

                <!-- Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø´Ø±ÙƒØ§Ø¡ -->
                <div class="my-6 flex items-center justify-center">
                    <span class="inline-block h-[1px] flex-1 max-w-xs bg-gray-300"></span>

                    <span class="inline-flex items-center justify-center gap-2 px-4 py-1.5 mx-auto mb-4
                        text-[11px] sm:text-xs font-semibold tracking-wide
                        text-white badge-gradient
                        rounded-full shadow-sm">
                        <span class="h-1.5 w-1.5 rounded-full bg-white/80"></span>
                        <span>Ø´Ø±ÙƒØ§Ø¡ Ø§Ù„Ù†Ø¬Ø§Ø­</span>
                        <span class="h-1.5 w-1.5 rounded-full bg-white/80"></span>
                    </span>

                    <span class="inline-block h-[1px] flex-1 max-w-xs bg-gray-300"></span>
                </div>

                <!-- Ø´Ø±ÙŠØ· Ø§Ù„Ø´Ø±ÙƒØ§Ø¡ Ø§Ù„Ù…ØªØ­Ø±Ùƒ -->
                <div class="partners-marquee mb-4">
                    <div class="partners-marquee-track">
                        <!-- Ù…Ø³Ø§ÙØ© ÙØ§Ø±ØºØ© ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ù„Ø¬Ø¹Ù„ Ø§Ù„Ø´Ø¹Ø§Ø±Ø§Øª ØªØ¨Ø¯Ø£ Ù…Ù† Ø®Ø§Ø±Ø¬ Ø§Ù„ÙŠÙ…ÙŠÙ† -->
                        <div class="shrink-0" style="width: 50vw;"></div>

                        <!-- Ø´Ø±ÙƒØ© Ù‡Ø±ÙÙŠ -->
                        <div class="shrink-0 w-20 h-12 sm:w-24 sm:h-14 flex items-center justify-center">
                            <div class="w-full h-full rounded-lg bg-[url('https://i.postimg.cc/7YBpZHCn/shrkt-hrfy.png')] bg-center bg-contain bg-no-repeat
                                        cursor-pointer transition-transform duration-200 ease-out hover:scale-110"></div>
                        </div>
						
                        <!-- Ù…Ø¤Ø³Ø³Ø© Ø§Ù„Ù…Ù„Ùƒ Ø®Ø§Ù„Ø¯ -->
                        <div class="shrink-0 w-20 h-12 sm:w-24 sm:h-14 flex items-center justify-center">
                            <div class="w-full h-full rounded-lg bg-[url('https://i.postimg.cc/mrXntJQ8/mwsst-almlk-khald.jpg')] bg-center bg-contain bg-no-repeat
                                        cursor-pointer transition-transform duration-200 ease-out hover:scale-110"></div>
                        </div>

                        <!-- Safari -->
                        <div class="shrink-0 w-20 h-12 sm:w-24 sm:h-14 flex items-center justify-center">
                            <div class="w-full h-full rounded-lg bg-[url('https://i.postimg.cc/v4Lsfzbw/Safari-logo.png')] bg-center bg-contain bg-no-repeat
                                        cursor-pointer transition-transform duration-200 ease-out hover:scale-110"></div>
                        </div>

                        <!-- The Clinics -->
                        <div class="shrink-0 w-20 h-12 sm:w-24 sm:h-14 flex items-center justify-center">
                            <div class="w-full h-full rounded-lg bg-[url('https://i.postimg.cc/hXbBTrgH/The-Clinics.jpg')] bg-center bg-contain bg-no-repeat
                                        cursor-pointer transition-transform duration-200 ease-out hover:scale-110"></div>
                        </div>

                        <!-- alathath -->
                        <div class="shrink-0 w-20 h-12 sm:w-24 sm:h-14 flex items-center justify-center">
                            <div class="w-full h-full rounded-lg bg-[url('https://i.postimg.cc/18cQwHPk/alathath.png')] bg-center bg-contain bg-no-repeat
                                        cursor-pointer transition-transform duration-200 ease-out hover:scale-110"></div>
                        </div>

                        <!-- althalf -->
                        <div class="shrink-0 w-20 h-12 sm:w-24 sm:h-14 flex items-center justify-center">
                            <div class="w-full h-full rounded-lg bg-[url('https://i.postimg.cc/Y4rw3WCH/althalf.png')] bg-center bg-contain bg-no-repeat
                                        cursor-pointer transition-transform duration-200 ease-out hover:scale-110"></div>
                        </div>

                        <!-- Ø§Ù„Ø®Ø²Ù Ø§Ù„Ø³Ø¹ÙˆØ¯ÙŠ -->
                        <div class="shrink-0 w-20 h-12 sm:w-24 sm:h-14 flex items-center justify-center">
                            <div class="w-full h-full rounded-lg bg-[url('https://i.postimg.cc/tstjW5pQ/alkhzf-alsÊ¿wdy-jpg-large.jpg')] bg-center bg-contain bg-no-repeat
                                        cursor-pointer transition-transform duration-200 ease-out hover:scale-110"></div>
                        </div>

                        <!-- Ø§Ù„Ø³Ø¯Ø­Ø§Ù† -->
                        <div class="shrink-0 w-20 h-12 sm:w-24 sm:h-14 flex items-center justify-center">
                            <div class="w-full h-full rounded-lg bg-[url('https://i.postimg.cc/mPNsCwBG/alsdhan.jpg')] bg-center bg-contain bg-no-repeat
                                        cursor-pointer transition-transform duration-200 ease-out hover:scale-110"></div>
                        </div>

                        <!-- Ø§Ù„ÙÙÙ†Ø§Ø± -->
                        <div class="shrink-0 w-20 h-12 sm:w-24 sm:h-14 flex items-center justify-center">
                            <div class="w-full h-full rounded-lg bg-[url('https://i.postimg.cc/9DthZpC2/alfnar.jpg')] bg-center bg-contain bg-no-repeat
                                        cursor-pointer transition-transform duration-200 ease-out hover:scale-110"></div>
                        </div>

                        <!-- Ø¨Ø§Ø¬Ù‡ -->
                        <div class="shrink-0 w-20 h-12 sm:w-24 sm:h-14 flex items-center justify-center">
                            <div class="w-full h-full rounded-lg bg-[url('https://i.postimg.cc/zySrKj8r/bajh.png')] bg-center bg-contain bg-no-repeat
                                        cursor-pointer transition-transform duration-200 ease-out hover:scale-110"></div>
                        </div>

                        <!-- ÙƒØ§Ø±Ù…ÙŠØ© -->
                        <div class="shrink-0 w-20 h-12 sm:w-24 sm:h-14 flex items-center justify-center">
                            <div class="w-full h-full rounded-lg bg-[url('https://i.postimg.cc/hG1S6DWk/karmyh.png')] bg-center bg-contain bg-no-repeat
                                        cursor-pointer transition-transform duration-200 ease-out hover:scale-110"></div>
                        </div>

                        <!-- Holiday Inn -->
                        <div class="shrink-0 w-20 h-12 sm:w-24 sm:h-14 flex items-center justify-center">
                            <div class="w-full h-full rounded-lg bg-[url('https://i.postimg.cc/5XqVL3bf/lwqw-hwlydy-an.jpg')] bg-center bg-contain bg-no-repeat
                                        cursor-pointer transition-transform duration-200 ease-out hover:scale-110"></div>
                        </div>

                        <!-- ÙƒÙˆÙ†Ø³Ù„Øª -->
                        <div class="shrink-0 w-20 h-12 sm:w-24 sm:h-14 flex items-center justify-center">
                            <div class="w-full h-full rounded-lg bg-[url('https://i.postimg.cc/nzm1pPTx/sÊ¿wd-kwnslt.png')] bg-center bg-contain bg-no-repeat
                                        cursor-pointer transition-transform duration-200 ease-out hover:scale-110"></div>
                        </div>

                        <!-- ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ø¹Ø·ÙˆØ± -->
                        <div class="shrink-0 w-20 h-12 sm:w-24 sm:h-14 flex items-center justify-center">
                            <div class="w-full h-full rounded-lg bg-[url('https://i.postimg.cc/r0bXMZCF/lwjw-tqnyt-alÊ¿twr.png')] bg-center bg-contain bg-no-repeat
                                        cursor-pointer transition-transform duration-200 ease-out hover:scale-110"></div>
                        </div>

                        <!-- Ù…Ø±ÙŠÙˆØª -->
                        <div class="shrink-0 w-20 h-12 sm:w-24 sm:h-14 flex items-center justify-center">
                            <div class="w-full h-full rounded-lg bg-[url('https://i.postimg.cc/r0bXMZCr/marywt.png')] bg-center bg-contain bg-no-repeat
                                        cursor-pointer transition-transform duration-200 ease-out hover:scale-110"></div>
                        </div>

                        <!-- Ø­Ø¯ÙŠØ¯ Ø§Ù„Ø±Ø§Ø¬Ø­ÙŠ -->
                        <div class="shrink-0 w-20 h-12 sm:w-24 sm:h-14 flex items-center justify-center">
                            <div class="w-full h-full rounded-lg bg-[url('https://i.postimg.cc/Xq2QXCMt/hdyd-alrajhy.png')] bg-center bg-contain bg-no-repeat
                                        cursor-pointer transition-transform duration-200 ease-out hover:scale-110"></div>
                        </div>

                        <!-- Ø¨Ù†Ø§Ø¡ -->
                        <div class="shrink-0 w-20 h-12 sm:w-24 sm:h-14 flex items-center justify-center">
                            <div class="w-full h-full rounded-lg bg-[url('https://i.postimg.cc/YCLbq0dx/bnaÊ¾.png')] bg-center bg-contain bg-no-repeat
                                        cursor-pointer transition-transform duration-200 ease-out hover:scale-110"></div>
                        </div>

                        <!-- Ø§Ù„ÙˆØ¨ÙƒÙˆ -->
                        <div class="shrink-0 w-20 h-12 sm:w-24 sm:h-14 flex items-center justify-center">
                            <div class="w-full h-full rounded-lg bg-[url('https://i.postimg.cc/tRB3nt5z/lwqw-alwbkw.png')] bg-center bg-contain bg-no-repeat
                                        cursor-pointer transition-transform duration-200 ease-out hover:scale-110"></div>
                        </div>

                        <!-- Ø§Ù„Ø¬ÙØ§Ù„ÙŠ -->
                        <div class="shrink-0 w-20 h-12 sm:w-24 sm:h-14 flex items-center justify-center">
                            <div class="w-full h-full rounded-lg bg-[url('https://i.postimg.cc/Cx7k9Lxg/Juffali_primary.png')] bg-center bg-contain bg-no-repeat
                                        cursor-pointer transition-transform duration-200 ease-out hover:scale-110"></div>
                        </div>

                        <!-- Ù…ÙŠØ¨Ùˆ -->
                        <div class="shrink-0 w-20 h-12 sm:w-24 sm:h-14 flex items-center justify-center">
                            <div class="w-full h-full rounded-lg bg-[url('https://i.postimg.cc/L8DLG68R/MOBI_LOGO.png')] bg-center bg-contain bg-no-repeat
                                        cursor-pointer transition-transform duration-200 ease-out hover:scale-110"></div>
                        </div>

                    </div>
                </div>

                <!-- ÙØ§ØµÙ„ Ø¨ÙŠÙ† Ø§Ù„Ø´Ø±ÙƒØ§Ø¡ ÙˆØ§Ù„Ø´Ø¹Ø§Ø± -->
                <div class="my-4 flex justify-center">
                    <div class="h-px w-80 bg-gradient-to-r from-transparent via-gray-400 to-transparent"></div>
                </div>
                <h1 class="text-2xl sm:text-3xl md:text-4xl font-bold mb-3 sm:mb-4 text-gray-800 min-h-[1.2em]"></h1>
            </div>

            <div class="space-y-4 sm:space-y-6">
                <div>
                    <label class="block text-base sm:text-lg font-semibold text-gray-700 mb-1.5 sm:mb-2">
                        Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø´Ø£Ø© <span class="text-red-500">*</span>
                    </label>
                    <input type="text" id="facilityName" required
                        class="w-full px-3 py-2.5 sm:px-4 sm:py-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:outline-none text-sm sm:text-base">
                </div>

                <div>
                    <label class="block text-base sm:text-lg font-semibold text-gray-700 mb-1.5 sm:mb-2">
                        Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ <span class="text-red-500">*</span>
                    </label>
                    <input type="email" id="email" required
                        class="w-full px-3 py-2.5 sm:px-4 sm:py-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:outline-none text-sm sm:text-base">
                    <p id="emailError" class="hidden text-red-600 text-sm mt-1">
                        Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¨Ø±ÙŠØ¯ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØµØ­ÙŠØ­ (Ù…Ø«Ø§Ù„: <a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="f19f909c94b19489909c819d94df929e9c">[email&#160;protected]</a>)
                    </p>
                </div>

                <div class="grid gap-4 md:grid-cols-2">
                    <div>
                        <label class="block text-base sm:text-lg font-semibold text-gray-700 mb-1.5 sm:mb-2">
                            Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ <span class="text-red-500">*</span>
                        </label>
                        <input type="tel" id="phone" required placeholder="05xxxxxxxx" maxlength="10"
                            class="w-full px-3 py-2.5 sm:px-4 sm:py-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:outline-none text-sm sm:text-base">
                        <p id="phoneError" class="hidden text-red-600 text-sm mt-1">
                            Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù… Ø¬ÙˆØ§Ù„ Ø³Ø¹ÙˆØ¯ÙŠ ØµØ­ÙŠØ­ Ø¨ØµÙŠØºØ© 05xxxxxxxx
                        </p>
                    </div>

                    <div>
                        <label class="block text-base sm:text-lg font-semibold text-gray-700 mb-1.5 sm:mb-2">
                            Ø§Ù„Ù…Ù†Ø·Ù‚Ø© <span class="text-red-500">*</span>
                        </label>
                        <select id="region" required
                            class="w-full px-3 py-2.5 sm:px-4 sm:py-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:outline-none text-sm sm:text-base">
                            <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ù†Ø·Ù‚Ø©</option>
                            <option value="Ø§Ù„Ø±ÙŠØ§Ø¶">Ø§Ù„Ø±ÙŠØ§Ø¶</option>
                            <option value="Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø©">Ù…ÙƒØ© Ø§Ù„Ù…ÙƒØ±Ù…Ø©</option>
                            <option value="Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©">Ø§Ù„Ù…Ø¯ÙŠÙ†Ø© Ø§Ù„Ù…Ù†ÙˆØ±Ø©</option>
                            <option value="Ø§Ù„Ø´Ø±Ù‚ÙŠØ©">Ø§Ù„Ø´Ø±Ù‚ÙŠØ©</option>
                            <option value="Ø¹Ø³ÙŠØ±">Ø¹Ø³ÙŠØ±</option>
                            <option value="ØªØ¨ÙˆÙƒ">ØªØ¨ÙˆÙƒ</option>
                            <option value="Ø­Ø§Ø¦Ù„">Ø­Ø§Ø¦Ù„</option>
                            <option value="Ø§Ù„Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©">Ø§Ù„Ø­Ø¯ÙˆØ¯ Ø§Ù„Ø´Ù…Ø§Ù„ÙŠØ©</option>
                            <option value="Ø¬Ø§Ø²Ø§Ù†">Ø¬Ø§Ø²Ø§Ù†</option>
                            <option value="Ù†Ø¬Ø±Ø§Ù†">Ù†Ø¬Ø±Ø§Ù†</option>
                            <option value="Ø§Ù„Ø¨Ø§Ø­Ø©">Ø§Ù„Ø¨Ø§Ø­Ø©</option>
                            <option value="Ø§Ù„Ø¬ÙˆÙ">Ø§Ù„Ø¬ÙˆÙ</option>
                            <option value="Ø§Ù„Ù‚ØµÙŠÙ…">Ø§Ù„Ù‚ØµÙŠÙ…</option>
                        </select>
                    </div>
                </div>

                <div>
                    <label class="block text-base sm:text-lg font-semibold text-gray-700 mb-1.5 sm:mb-2">
                        Ø­Ø¬Ù… Ø§Ù„Ù…Ù†Ø´Ø£Ø© <span class="text-red-500">*</span>
                    </label>
                    <select id="facilitySize" required
                        class="w-full px-3 py-2.5 sm:px-4 sm:py-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:outline-none text-sm sm:text-base">
                        <option value="">Ø§Ø®ØªØ± Ø­Ø¬Ù… Ø§Ù„Ù…Ù†Ø´Ø£Ø©</option>
                        <option value="Ø¶Ø®Ù…Ø©">Ø¶Ø®Ù…Ø©</option>
                        <option value="ÙƒØ¨Ø±Ù‰">ÙƒØ¨Ø±Ù‰</option>
                        <option value="Ù…ØªÙˆØ³Ø·Ø©">Ù…ØªÙˆØ³Ø·Ø©</option>
                        <option value="ØµØºØ±Ù‰">ØµØºØ±Ù‰</option>
                    </select>
                </div>

                <div id="infoError"
                    class="hidden bg-red-100 border border-red-400 text-red-700 px-3 py-2.5 sm:px-4 sm:py-3 rounded-lg text-sm sm:text-base">
                    ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
                </div>

                <button onclick="validateAndProceed()"
                    class="btn-next w-full text-white py-3.5 sm:py-4 rounded-xl text-base sm:text-lg font-semibold transition-all shadow-lg">
                    Ø§Ù„ØªØ§Ù„ÙŠ
                </button>
            </div>
        </div>

        <!-- Page 2: Survey -->
        <div id="surveyPage" class="form-card hidden bg-white rounded-2xl shadow-2xl p-4 sm:p-6 md:p-8">
            <!-- Top Dark Banner -->
            <div class="top-banner-wrap -mx-4 sm:-mx-6 md:-mx-8 -mt-4 sm:-mt-6 md:-mt-8 mb-5 sm:mb-7">
                <div class="top-banner rounded-2xl sm:rounded-3xl px-4 py-4 sm:px-6 sm:py-6">
                    <div class="flex items-center justify-center">
                        <img src="https://i.postimg.cc/pdX7NfWt/t.png" alt="Logo" loading="eager" decoding="async"
                             class="h-20 sm:h-24 md:h-28 w-auto object-contain drop-shadow-[0_10px_22px_rgba(0,0,0,0.35)]">
                    </div>
                </div>
            </div>

            <div class="text-center mb-6 sm:mb-8">
                <h1 class="text-2xl sm:text-3xl md:text-4xl font-bold mb-3 sm:mb-4 text-gray-800">
                    Ù‡Ù„ Ù…Ù†Ø´Ø£ØªÙƒ Ù…ÙˆØ§Ø¡Ù…Ø©ØŸ
                </h1>
                <p class="text-base sm:text-lg text-gray-600">
                    Ø­Ø¯Ø¯ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„ØªÙŠ ØªÙ…Ø«Ù„ ÙˆØ¶Ø¹ Ù…Ù†Ø´Ø£ØªÙƒÙ… Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¨Ø¯Ù‚Ø©
                </p>
            </div>

            <div id="questionsContainer"></div>

            <div
                class="sticky bottom-0 sm:bottom-4 bg-white rounded-xl p-3 sm:p-4 shadow-xl border-t sm:border-2 sm:border-indigo-200 mt-4 sm:mt-6">
                <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-2 sm:mb-3">
                    <span class="text-sm sm:text-lg font-semibold text-gray-700">
                        Ø§Ù„ØªÙ‚Ø¯Ù…: <span id="progressText">0 / 11</span>
                    </span>
                    <span class="text-sm sm:text-lg font-semibold text-indigo-600">
                        <span id="progressPercent">0</span>%
                    </span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2.5 sm:h-3 mb-3 sm:mb-4">
                    <div id="progressBar"
                        class="progress-gradient h-2.5 sm:h-3 rounded-full transition-all"
                        style="width: 0%">
                    </div>
                </div>

                <button id="incompleteBtn"
                    class="w-full py-3 sm:py-4 rounded-xl text-sm sm:text-lg font-bold transition-all bg-gray-300 text-gray-500 cursor-not-allowed">
                    ÙŠØ±Ø¬Ù‰ Ø¥ÙƒÙ…Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© âš ï¸
                </button>

                <div id="sendBtns" class="hidden mt-2">
                    <button id="sendResultsBtn" onclick="sendEmailWithResults()"
                        class="btn-next w-full text-white py-3 sm:py-4 rounded-xl text-sm sm:text-lg font-semibold transition-all shadow-lg">
                        Ø¥Ø±Ø³Ø§Ù„ ğŸ“¨
                    </button>
                </div>

                <div id="thankYouMessage" class="hidden">
                    <button onclick="showResults()"
                        class="btn-next w-full text-white py-3 sm:py-4 rounded-xl text-sm sm:text-lg font-semibold transition-all shadow-lg">

                        <div class="text-3xl sm:text-5xl mb-2 sm:mb-3">âœ…</div>
                        <h3 class="text-xl sm:text-2xl font-bold text-white-800 mb-1 sm:mb-2">
                            Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©
                        </h3>

                    </button>
                </div>

            </div>
        </div>

        <!-- Page 3: Results -->
        <div id="resultsPage" class="form-card hidden bg-white rounded-2xl shadow-2xl p-4 sm:p-6 md:p-8">
            <!-- Top Dark Banner -->
            <div class="top-banner-wrap -mx-4 sm:-mx-6 md:-mx-8 -mt-4 sm:-mt-6 md:-mt-8 mb-5 sm:mb-7">
                <div class="top-banner rounded-2xl sm:rounded-3xl px-4 py-4 sm:px-6 sm:py-6">
                    <div class="flex items-center justify-center">
                        <img src="https://i.postimg.cc/pdX7NfWt/t.png" alt="Logo" loading="eager" decoding="async"
                             class="h-20 sm:h-24 md:h-28 w-auto object-contain drop-shadow-[0_10px_22px_rgba(0,0,0,0.35)]">
                    </div>
                </div>
            </div>

            <h1 class="text-2xl sm:text-3xl md:text-4xl font-bold text-center mb-4 sm:mb-6 text-gray-800">
                Ù†ØªØ§Ø¦Ø¬ Ø§Ø³ØªØ¨ÙŠØ§Ù† ğŸ¯
            </h1>

            <!-- âœ… ÙƒØ±ØªÙŠÙ† Ù†ÙØ³ ÙÙƒØ±Ø© Ø§Ù„Ù‚ÙˆØ³ + Ø¨Ø¯ÙˆÙ† Ù†Ø³Ø¨Ø© Ù…Ø¦ÙˆÙŠØ© ÙÙŠ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ -->
            <div class="grid gap-4 sm:gap-6 md:grid-cols-2 mb-6 sm:mb-8">

                <!-- ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ù†Ø´Ø£Ø© (Gauge) -->
                <div id="levelCard" class="levelCardModern rounded-xl p-4 sm:p-6 text-center">
                    <h3 class="text-lg sm:text-xl font-semibold mb-2 sm:mb-3 text-gray-900">ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ù†Ø´Ø£Ø©</h3>

                    <div class="gaugeWrap">
                        <div class="gauge">
                            <svg class="gaugeSvg" viewBox="0 0 200 140" aria-hidden="true">
                                <defs>
                                    <!-- Ø¨Ø±ØªÙ‚Ø§Ù„ÙŠ -> Ø£Ø®Ø¶Ø± -->
                                    <linearGradient id="gaugeGradLevel" x1="0%" y1="0%" x2="100%" y2="0%">
                                        <stop offset="0%" stop-color="#f59e0b"/>
                                        <stop offset="55%" stop-color="#fbbf24"/>
                                        <stop offset="100%" stop-color="#22c55e"/>
                                    </linearGradient>
                                </defs>

                                <path class="gaugeInnerShadow" d="M 20 115 A 80 80 0 0 1 180 115"></path>
                                <path class="gaugeBg" d="M 20 115 A 80 80 0 0 1 180 115"></path>
                                <path id="gaugeFg" class="gaugeFg gaugeFgLevel" d="M 20 115 A 80 80 0 0 1 180 115"></path>
                            </svg>

                            <div class="gaugeCenter">
                                <div class="gaugeScore" dir="ltr">
                                    <span id="gaugeValue">0</span>
                                    <span class="gaugeSep">/</span>
                                    <small id="gaugeMax">100</small>
                                </div>

                                <div id="gaugeBadge" class="gaugeBadge is-average">-</div>
                            </div>
                        </div>

                        <div id="gaugeDesc" class="gaugeDesc">-</div>
                    </div>
                </div>

                <!-- Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© (Gauge) - Ø¨Ø¯ÙˆÙ† % -->
                <div id="totalCard" class="levelCardModern rounded-xl p-4 sm:p-6 text-center">
                    <h3 class="text-lg sm:text-xl font-semibold mb-2 sm:mb-3 text-gray-900">Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©</h3>

                    <div class="gaugeWrap">
                        <div class="gauge">
                            <svg class="gaugeSvg" viewBox="0 0 200 140" aria-hidden="true">
                                <defs>
                                    <!-- Ø£Ø²Ø±Ù‚ -> Ø¨Ù†ÙØ³Ø¬ÙŠ -->
                                    <linearGradient id="gaugeGradTotal" x1="0%" y1="0%" x2="100%" y2="0%">
                                        <stop offset="0%" stop-color="#2563eb"/>
                                        <stop offset="60%" stop-color="#7c3aed"/>
                                        <stop offset="100%" stop-color="#9333ea"/>
                                    </linearGradient>
                                </defs>

                                <path class="gaugeInnerShadow" d="M 20 115 A 80 80 0 0 1 180 115"></path>
                                <path class="gaugeBg" d="M 20 115 A 80 80 0 0 1 180 115"></path>
                                <path id="totalGaugeFg" class="gaugeFg gaugeFgTotal" d="M 20 115 A 80 80 0 0 1 180 115"></path>
                            </svg>

                            <div class="gaugeCenter">
                                <div class="gaugeScore" dir="ltr">
                                    <span id="totalPointsValue">0</span>
                                    <span class="gaugeSep">/</span>
                                    <small id="totalPointsMax">0</small>
                                </div>

                                <div id="totalBadge" class="gaugeBadge is-total">Ø¥Ø¬Ù…Ø§Ù„ÙŠ</div>
                            </div>
                        </div>

                        <div class="gaugeDesc">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù†Ù‚Ø§Ø· Ø§Ù„Ø§Ø³ØªØ¨ÙŠØ§Ù†</div>
                    </div>
                </div>

            </div>

            <div class="bg-blue-50 rounded-xl p-4 sm:p-6 mb-4 sm:mb-6">
                <h3 class="text-lg sm:text-xl font-bold mb-3 sm:mb-4 text-gray-800">ØªÙØµÙŠÙ„ Ø§Ù„Ù†Ù‚Ø§Ø· Ø­Ø³Ø¨ Ø§Ù„Ù‚Ø³Ù… ğŸ“‹</h3>
                <div id="sectionDetails" class="grid gap-3 sm:gap-4 md:grid-cols-2"></div>
            </div>

            <div class="bg-green-50 border-2 border-green-400 rounded-xl p-4 sm:p-6 mb-4 sm:mb-6 text-center">
                <h3 class="text-xl sm:text-2xl font-bold text-gray-800 mb-2 sm:mb-3">Ø´ÙƒØ±Ø§Ù‹ Ù„Ù…Ø´Ø§Ø±ÙƒØªÙƒ! âœ¨</h3>
                <p class="text-sm sm:text-lg text-gray-700 mb-3 sm:mb-4">
                    Ù„Ù…Ø¹Ø±ÙØ© ØªÙØ§ØµÙŠÙ„ Ø§Ù„ØªØ­Ø³ÙŠÙ† Ø£Ùˆ Ø·Ù„Ø¨ Ø§Ø³ØªØ´Ø§Ø±Ø© Ù…Ø¬Ø§Ù†ÙŠØ©
                </p>
                <button id="consultationBtn" onclick="sendConsultationRequest()"
                    class="bg-gradient-to-r from-green-600 to-emerald-600 text-white py-3 sm:py-4 px-6 sm:px-8 rounded-xl text-sm sm:text-lg font-semibold hover:from-green-700 hover:to-emerald-700 transition-all shadow-lg">
                      Ø§Ø¶ØºØ· Ù‡Ù†Ø§  ğŸ“
                </button>
            </div>

            <button onclick="resetSurvey()"
                class="btn-next w-full text-white py-3 sm:py-4 rounded-xl text-sm sm:text-lg font-semibold transition-all shadow-lg">
                Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø³ØªØ¨ÙŠØ§Ù† ğŸ”„
            </button>
        </div>

    </div> <!-- Ù†Ù‡Ø§ÙŠØ© Ø§Ù„Ù€ container -->

    <script data-cfasync="false" src="/cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script>
        // ===== Toast Functions =====
        var toastTimeout = null;

        function showToast(message, type) {
            var wrapper = document.getElementById('toastWrapper');
            var toast = document.getElementById('toast');
            var msg = document.getElementById('toastMessage');
            var icon = document.getElementById('toastIcon');

            msg.textContent = message;

            if (type === 'success') {
                toast.className = "pointer-events-auto max-w-xs sm:max-w-sm px-4 py-3 rounded-xl shadow-lg text-sm sm:text-base flex items-center gap-2 bg-green-600 text-white";
                icon.textContent = '';
            } else if (type === 'error') {
                toast.className = "pointer-events-auto max-w-xs sm:max-w-sm px-4 py-3 rounded-xl shadow-lg text-sm sm:text-base flex items-center gap-2 bg-red-600 text-white";
                icon.textContent = '';
            } else {
                toast.className = "pointer-events-auto max-w-xs sm:max-w-sm px-4 py-3 rounded-xl shadow-lg text-sm sm:text-base flex items-center gap-2 bg-indigo-600 text-white";
                icon.textContent = '';
            }

            wrapper.classList.remove('hidden');

            if (toastTimeout) clearTimeout(toastTimeout);
            toastTimeout = setTimeout(hideToast, 3000);
        }

        function hideToast() {
            var wrapper = document.getElementById('toastWrapper');
            wrapper.classList.add('hidden');
        }

        // âœ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ù‚ÙˆØ³ Ø­Ø³Ø¨ ID
        function updateGaugeById(fgId, value) {
            var fg = document.getElementById(fgId);
            if (!fg) return;

            var v = Math.max(0, Math.min(100, Number(value) || 0));
            var len = fg.getTotalLength();

            fg.style.strokeDasharray = String(len);
            fg.style.strokeDashoffset = String(len - (len * v / 100));
        }


        // âœ… Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ ÙƒØ±Øª "Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©" (ØªØ­ÙƒÙ… Ù…Ù† Ù…ØªØºÙŠØ± SHOW_TOTAL_CARD)
        function applyTotalCardVisibility() {
            var totalCard = document.getElementById('totalCard');
            var levelCard = document.getElementById('levelCard');
            if (!totalCard || !levelCard) return;

            if (SHOW_TOTAL_CARD) {
                totalCard.style.display = '';
                levelCard.style.gridColumn = '';
            } else {
                totalCard.style.display = 'none';
                // ÙŠØ®Ù„ÙŠ ÙƒØ±Øª Ø§Ù„ØªÙ‚ÙŠÙŠÙ… ÙŠØªÙ…Ø¯Ø¯ Ø¨Ø¹Ø±Ø¶ Ø§Ù„ØµÙ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ÙƒØ¨ÙŠØ±Ø©
                levelCard.style.gridColumn = '1 / -1';
            }
        }

        function mixHex(a, b, t) {
            function hexToRgb(h) {
                h = (h || '').replace('#', '').trim();
                if (h.length === 3) h = h.split('').map(function (ch) { return ch + ch; }).join('');
                var n = parseInt(h, 16);
                return { r: (n >> 16) & 255, g: (n >> 8) & 255, b: n & 255 };
            }
            function rgbToHex(r, g, b) {
                function to(v) { return ('0' + v.toString(16)).slice(-2); }
                return '#' + to(r) + to(g) + to(b);
            }
            var A = hexToRgb(a), B = hexToRgb(b);
            var r = Math.round(A.r + (B.r - A.r) * t);
            var g = Math.round(A.g + (B.g - A.g) * t);
            var bb = Math.round(A.b + (B.b - A.b) * t);
            return rgbToHex(r, g, bb);
        }

        function levelGradient(levelWord) {
            if (levelWord === 'Ù…Ù…ØªØ§Ø²') return ['#16a34a', '#22c55e'];
            if (levelWord === 'Ø¬ÙŠØ¯ Ø¬Ø¯Ù‹Ø§') return ['#22c55e', '#86efac'];
            if (levelWord === 'Ù…ØªÙˆØ³Ø·') return ['#f59e0b', '#fbbf24'];
            return ['#dc2626', '#ef4444']; // Ø¶Ø¹ÙŠÙ
        }

        function setSvgGradient(gradId, c1, c2) {
            var grad = document.getElementById(gradId);
            if (!grad) return;

            var stops = grad.querySelectorAll('stop');
            if (!stops || !stops.length) return;

            var last = stops.length - 1;
            for (var i = 0; i < stops.length; i++) {
                var t = (last === 0) ? 1 : (i / last);
                stops[i].setAttribute('stop-color', mixHex(c1, c2, t));
            }
        }

        function applyGaugeTheme(levelWord) {
            var badge = document.getElementById('gaugeBadge');
            var fg = document.getElementById('gaugeFg');
            if (!badge) return;

            badge.className = 'gaugeBadge';

            if (levelWord === 'Ù…Ù…ØªØ§Ø²') badge.classList.add('is-excellent');
            else if (levelWord === 'Ø¬ÙŠØ¯ Ø¬Ø¯Ù‹Ø§') badge.classList.add('is-verygood');
            else if (levelWord === 'Ù…ØªÙˆØ³Ø·') badge.classList.add('is-average');
            else badge.classList.add('is-weak');

            // âœ… Ù†ÙØ³ ØªØ¯Ø±Ù‘Ø¬ Ø§Ù„Ù‚ÙˆØ³ Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø§Ø¯Ø¬
            var colors = levelGradient(levelWord);
            badge.style.setProperty('--badge1', colors[0]);
            badge.style.setProperty('--badge2', colors[1]);

            // âœ… ØºÙŠÙ‘Ø± ØªØ¯Ø±Ù‘Ø¬ Ø§Ù„Ù‚ÙˆØ³ Ø­Ø³Ø¨ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…
            setSvgGradient('gaugeGradLevel', colors[0], colors[1]);

            // âœ… ØªØ£ÙƒØ¯ Ø§Ù„Ù‚ÙˆØ³ ÙŠØ³ØªØ®Ø¯Ù… Ø§Ù„ØªØ¯Ø±Ù‘Ø¬ (Ù…Ùˆ Ù„ÙˆÙ† Ø«Ø§Ø¨Øª)
            if (fg) fg.style.stroke = 'url(#gaugeGradLevel)';
        }


        document.addEventListener('DOMContentLoaded', function () {
            const track = document.querySelector('.partners-marquee-track');
            if (track) {
                // Ù†ÙƒØ±Ø± Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø´Ø±ÙŠØ· Ù…Ø±Ø© Ø«Ø§Ù†ÙŠØ© ÙÙ‚Ø· Ø¨Ø±Ù…Ø¬ÙŠØ§Ù‹
                track.innerHTML += track.innerHTML;
                
                // Ù†Ø¨Ø¯Ø£ Ø§Ù„Ø´Ø±ÙŠØ· Ù…Ù† Ø§Ù„ÙŠÙ…ÙŠÙ† (Ø®Ø§Ø±Ø¬ Ø§Ù„Ø´Ø§Ø´Ø© Ù‚Ù„ÙŠÙ„Ø§Ù‹)
                // Ø¨Ø¹Ø¯ Ø§Ù„ØªÙƒØ±Ø§Ø± Ù†Ø­Ø³Ø¨ Ø§Ù„Ø¹Ø±Ø¶ ÙˆÙ†Ø¨Ø¯Ø£ Ù…Ù† Ù…ÙˆØ¶Ø¹ Ù…Ù†Ø§Ø³Ø¨
                const trackWidth = track.offsetWidth;
                track.style.transform = 'translateX(0)';
            }

            // ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø­Ù‚ÙˆÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ù†Ø¯ ÙØªØ­ Ø§Ù„ØµÙØ­Ø©
            autoFillInfo();

            // ØªØµÙÙŠØ± Ø§Ù„Ø£Ù‚ÙˆØ§Ø³
            updateGaugeById('gaugeFg', 0);
            updateGaugeById('totalGaugeFg', 0);
            applyTotalCardVisibility();
        });

        // ===== Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø§Ø³ØªØ¨ÙŠØ§Ù† =====
        var sections = [
          { title: "Ø£ÙˆÙ„Ø§Ù‹: Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„ØªØ­ØªÙŠØ©", items: [
            "Ù‡Ù„ Ø§Ù„Ù…Ù…Ø±Ø§Øª ÙˆØ§Ù„Ù…Ù†Ø­Ø¯Ø±Ø§Øª ÙÙŠ Ø§Ù„Ù…Ù†Ø´Ø£Ø© Ù…Ù†Ø§Ø³Ø¨Ø© ÙˆØ³Ù‡Ù„Ø© Ø§Ù„ÙˆØµÙˆÙ„ØŸ",
            "Ù‡Ù„ ØªÙˆØ¬Ø¯ Ø¯ÙˆØ±Ø§Øª Ù…ÙŠØ§Ù‡ Ù…Ù‡ÙŠØ£Ø© Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø£Ø´Ø®Ø§Øµ Ø°ÙˆÙŠ Ø§Ù„Ø¥Ø¹Ø§Ù‚Ø©ØŸ",
            "Ù‡Ù„ ØªØªÙˆÙØ± Ù…ÙˆØ§Ù‚Ù Ù…Ø®ØµØµØ© Ù„Ù„Ø£Ø´Ø®Ø§Øµ Ø°ÙˆÙŠ Ø§Ù„Ø¥Ø¹Ø§Ù‚Ø©ØŸ"
          ]},
          { title: "Ø«Ø§Ù†ÙŠÙ‹Ø§: Ø¨ÙŠØ¦Ø© Ø§Ù„Ø¹Ù…Ù„", items: [
            "Ù‡Ù„ Ù„Ø¯Ù‰ Ø§Ù„Ù…Ù†Ø´Ø£Ø© Ø³ÙŠØ§Ø³Ø§Øª ÙˆØ§Ø¶Ø­Ø© Ù„Ø¯Ù…Ø¬ Ø§Ù„Ø£Ø´Ø®Ø§Øµ Ø°ÙˆÙŠ Ø§Ù„Ø¥Ø¹Ø§Ù‚Ø© ÙÙŠ Ø¨ÙŠØ¦Ø© Ø§Ù„Ø¹Ù…Ù„ØŸ",
            "Ù‡Ù„ ØªÙˆÙØ± Ø§Ù„Ù…Ù†Ø´Ø£Ø© Ø£Ø¬Ù‡Ø²Ø© Ø£Ùˆ Ø£Ø¯ÙˆØ§Øª Ù…Ø³Ø§Ø¹Ø¯Ø© Ù„ØªÙŠØ³ÙŠØ± Ø¹Ù…Ù„ Ø§Ù„Ø£Ø´Ø®Ø§Øµ Ø°ÙˆÙŠ Ø§Ù„Ø¥Ø¹Ø§Ù‚Ø©ØŸ"
          ]},
          { title: "Ø«Ø§Ù„Ø«Ù‹Ø§: Ø§Ù„ØªÙ‚Ù†ÙŠØ© ÙˆØ§Ù„ØªÙˆØ§ØµÙ„", items: [
            "Ù‡Ù„ Ù„Ø¯Ù‰ Ø§Ù„Ù…Ù†Ø´Ø£Ø© Ù…Ù†ØµØ§Øª Ø¯Ø§Ø®Ù„ÙŠØ© Ù…ÙŠØ³Ù‘Ø±Ø© Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ø£Ø´Ø®Ø§Øµ Ø°ÙˆÙŠ Ø§Ù„Ø¥Ø¹Ø§Ù‚Ø©ØŸ",
            "Ù‡Ù„ ØªÙˆÙØ± Ø§Ù„Ù…Ù†Ø´Ø£Ø© Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØªØ¯Ø±ÙŠØ¨ÙŠØ© Ø¨Ø·Ø±Ù‚ Ù…ØªØ¹Ø¯Ø¯Ø© ØªÙ†Ø§Ø³Ø¨ Ø§Ø­ØªÙŠØ§Ø¬Ø§Øª Ø§Ù„Ø£Ø´Ø®Ø§Øµ Ø°ÙˆÙŠ Ø§Ù„Ø¥Ø¹Ø§Ù‚Ø©ØŸ",
            "Ù‡Ù„ ØªØ³ØªØ®Ø¯Ù… Ø§Ù„Ù…Ù†Ø´Ø£Ø© Ù„ØºØ© ØªÙˆØ§ØµÙ„ ÙˆØ§Ø¶Ø­Ø© ÙˆØ³Ù‡Ù„Ø© ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚Ù†ÙˆØ§Øª ÙˆØ§Ù„Ù…ÙˆØ§Ø¯ØŸ"
          ]},
          { title: "Ø±Ø§Ø¨Ø¹Ù‹Ø§: Ø§Ù„Ù…ÙˆØ§Ø±Ø¯ Ø§Ù„Ø¨Ø´Ø±ÙŠØ©", items: [
            "Ù‡Ù„ Ù„Ø¯Ù‰ Ø§Ù„Ù…Ù†Ø´Ø£Ø© Ù…ÙˆØ¸ÙÙˆÙ† Ù…Ù† Ø§Ù„Ø£Ø´Ø®Ø§Øµ Ø°ÙˆÙŠ Ø§Ù„Ø¥Ø¹Ø§Ù‚Ø©ØŸ",
            "Ù‡Ù„ Ø­Ù‚Ù‚Øª Ø§Ù„Ù…Ù†Ø´Ø£Ø© Ù†Ø³Ø¨Ø© Ø§Ù„ØªÙˆØ¸ÙŠÙ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© (Ù…ÙˆØ¸Ù ÙˆØ§Ø­Ø¯ Ù…Ù† Ø°ÙˆÙŠ Ø§Ù„Ø¥Ø¹Ø§Ù‚Ø© Ù„ÙƒÙ„ 10 Ù…ÙˆØ¸ÙÙŠÙ† Ø³Ø¹ÙˆØ¯ÙŠÙŠÙ†)ØŸ"
          ]},
          { title: "Ø®Ø§Ù…Ø³Ù‹Ø§: Ø§Ù„Ù…Ø¹Ø±ÙØ© ÙˆØ§Ù„ÙˆØ¹ÙŠ", items: [
            "Ù‡Ù„ Ù‚Ø§Ù…Øª Ø§Ù„Ù…Ù†Ø´Ø£Ø© Ø¨ØªØ¹ÙŠÙŠÙ† Ù…Ø³Ø¤ÙˆÙ„ Ù…Ø®ØªØµ Ù„Ù…ØªØ§Ø¨Ø¹Ø© ÙˆØªÙ†ÙÙŠØ° Ù…Ø¹Ø§ÙŠÙŠØ± Ø§Ù„Ù…ÙˆØ§Ø¡Ù…Ø© Ù„Ù„Ø£Ø´Ø®Ø§Øµ Ø°ÙˆÙŠ Ø§Ù„Ø¥Ø¹Ø§Ù‚Ø©ØŸ",
            "Ù‡Ù„ ØªÙˆÙØ± Ø§Ù„Ù…Ù†Ø´Ø£Ø© ÙØ±Øµ ØªØ·ÙˆÙŠØ± ÙˆØªØ±Ù‚ÙŠØ© Ø¹Ø§Ø¯Ù„Ø© Ù„Ù„Ø£Ø´Ø®Ø§Øµ Ø°ÙˆÙŠ Ø§Ù„Ø¥Ø¹Ø§Ù‚Ø©ØŸ",
            "Ù‡Ù„ ÙŠØªÙ… ØªØ¯Ø±ÙŠØ¨ Ø§Ù„Ù…ÙˆØ¸ÙÙŠÙ† Ø¹Ù„Ù‰ ÙƒÙŠÙÙŠØ© Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø£Ø´Ø®Ø§Øµ Ø°ÙˆÙŠ Ø§Ù„Ø¥Ø¹Ø§Ù‚Ø©ØŸ"
          ]},
          { title: "Ø³Ø§Ø¯Ø³Ù‹Ø§: Ø§Ù„Ø§Ø¹ØªÙ…Ø§Ø¯Ø§Øª", items: [
            "Ù‡Ù„ Ø³Ø¨Ù‚ Ø£Ù† Ø­ØµÙ„Øª Ø§Ù„Ù…Ù†Ø´Ø£Ø© Ø¹Ù„Ù‰ Ø´Ù‡Ø§Ø¯Ø© Ù…ÙˆØ§Ø¡Ù…Ø©ØŸ",
            "Ù‡Ù„ ØªØ¹Ù…Ù„ Ø§Ù„Ù…Ù†Ø´Ø£Ø© Ø­Ø§Ù„ÙŠÙ‹Ø§ Ø¹Ù„Ù‰ Ø§Ø³ØªÙŠÙØ§Ø¡ Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø´Ù‡Ø§Ø¯Ø© Ø§Ù„Ù…ÙˆØ§Ø¡Ù…Ø©ØŸ"
          ]}
        ];


        var userInfo = {};
        var responses = {};
        var totalItems = 0;
        var consultationSent = false; // Ù„Ù…Ù†Ø¹ ØªÙƒØ±Ø§Ø± Ø·Ù„Ø¨ Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø© Ù„ÙƒÙ„ Ø§Ø³ØªØ¨ÙŠØ§Ù†

        // âœ… ØªØ­ÙƒÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ù„Ù„Ø¥ÙŠÙ…ÙŠÙ„ (Ù…Ù† Ø§Ù„ÙƒÙˆØ¯ ÙÙ‚Ø·)
        var ENABLE_RESULTS_EMAIL = true; // true = ÙŠØ±Ø³Ù„ / false = ÙŠØ¹Ø·Ù‘Ù„ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ù„Ù„Ø¥ÙŠÙ…ÙŠÙ„
        var SHOW_TOTAL_CARD = false; // true = ÙŠØ¸Ù‡Ø± ÙƒØ±Øª "Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ©" / false = ÙŠØ®ÙÙŠÙ‡

        for (var i = 0; i < sections.length; i++) {
            totalItems += sections[i].items.length;
        }

        // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØµØ­Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù‚Ø¨Ù„ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„
        function validateAndProceed() {
            var name = document.getElementById('facilityName').value.trim();
            var email = document.getElementById('email').value.trim();
            var phone = document.getElementById('phone').value.trim();

            // Normalize Saudi phone input:
            // - remove spaces/dashes
            // - allow +9665XXXXXXXX or 9665XXXXXXXX and convert to 05XXXXXXXX
            phone = phone.replace(/\s+/g, '').replace(/-/g, '');
            if (phone.startsWith('+966')) phone = '0' + phone.slice(4);
            else if (phone.startsWith('966')) phone = '0' + phone.slice(3);
            phoneInput && (phoneInput.value = phone);

            var region = document.getElementById('region').value;
            var size = document.getElementById('facilitySize').value;

            var infoError = document.getElementById('infoError');
            var emailError = document.getElementById('emailError');
            var phoneError = document.getElementById('phoneError');

            var emailInput = document.getElementById('email');
            var phoneInput = document.getElementById('phone');

            infoError.classList.add('hidden');
            emailError.classList.add('hidden');
            phoneError.classList.add('hidden');

            emailInput.classList.remove('border-red-500');
            phoneInput.classList.remove('border-red-500');

            var hasError = false;

            if (!name || !email || !phone || !region || !size) {
                infoError.textContent = 'ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©';
                infoError.classList.remove('hidden');
                showToast('ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©', 'error');
                hasError = true;
            }

            var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (email && !emailRegex.test(email)) {
                emailError.classList.remove('hidden');
                emailInput.classList.add('border-red-500');
                showToast('ØµÙŠØºØ© Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­Ø©', 'error');
                hasError = true;
            }

            var phoneRegex = /^05\d{8}$/;
            if (phone && !phoneRegex.test(phone)) {
                phoneError.classList.remove('hidden');
                phoneInput.classList.add('border-red-500');
                showToast('Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ø¨ØµÙŠØºØ© 05xxxxxxxx', 'error');
                hasError = true;
            }

            if (hasError) return;

            userInfo = { name, email, phone, region, size };

            document.getElementById('infoPage').classList.add('hidden');
            document.getElementById('surveyPage').classList.remove('hidden');
            renderQuestions();
            window.scrollTo(0, 0);

            showToast('ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŒ Ø§Ù†ØªÙ‚Ù„Ù†Ø§ Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø§Ø³ØªØ¨ÙŠØ§Ù† âœ…', 'success');
        }

        function getPerformanceColor(percentage) {
            if (percentage >= 80) return '#10b981';
            if (percentage >= 50) return '#f59e0b';
            return '#ef4444';
        }

        function renderQuestions() {
            var container = document.getElementById('questionsContainer');
            container.innerHTML = '';

            for (var sIdx = 0; sIdx < sections.length; sIdx++) {
                var section = sections[sIdx];
                var sectionDiv = document.createElement('div');
                sectionDiv.className = 'mb-6 sm:mb-8 bg-gray-50 rounded-xl p-4 sm:p-6 section-card';

                var title = document.createElement('h2');
                title.className = 'section-title text-lg sm:text-2xl font-bold mb-3 sm:mb-4 pb-1.5 sm:pb-2';
                title.textContent = section.title;
                sectionDiv.appendChild(title);

                for (var iIdx = 0; iIdx < section.items.length; iIdx++) {
                    var item = section.items[iIdx];
                    var itemDiv = document.createElement('div');
                    itemDiv.className = 'mb-3 sm:mb-4 bg-white rounded-lg p-3 sm:p-4 shadow-sm';

                    var itemText = document.createElement('p');
                    itemText.className = 'font-semibold text-sm sm:text-base text-gray-700 mb-2.5 sm:mb-3';
                    itemText.textContent = item;
                    itemDiv.appendChild(itemText);

                    var buttonsDiv = document.createElement('div');
                    buttonsDiv.className = 'flex flex-col sm:flex-row gap-2 sm:gap-4 justify-center';

                    var options = [
                        { value: 3, label: 'Ù†Ø¹Ù… ', color: 'bg-green-500 hover:bg-green-600' },
                        { value: 2, label: 'Ø¬Ø²Ø¦ÙŠÙ‹Ø§ ', color: 'bg-yellow-500 hover:bg-yellow-600' },
                        { value: 1, label: 'Ù„Ø§ ', color: 'bg-red-500 hover:bg-red-600' }
                    ];

                    for (var j = 0; j < options.length; j++) {
                        var option = options[j];
                        var btn = document.createElement('button');
                        btn.className = 'option-btn flex-1 py-2.5 sm:py-3 px-3 sm:px-4 rounded-lg text-black text-sm sm:text-base font-semibold transition-all bg-gray-300 hover:bg-gray-400';
                        btn.textContent = option.label;
                        btn.dataset.sectionIdx = sIdx;
                        btn.dataset.itemIdx = iIdx;
                        btn.onclick = (function(si, ii, val, col) {
                            return function() {
                                handleResponse(si, ii, val, col, this);
                            };
                        })(sIdx, iIdx, option.value, option.color);
                        buttonsDiv.appendChild(btn);
                    }

                    itemDiv.appendChild(buttonsDiv);
                    sectionDiv.appendChild(itemDiv);
                }

                container.appendChild(sectionDiv);
            }
        }

        function handleResponse(sIdx, iIdx, value, color, clickedBtn) {
            var key = sIdx + '-' + iIdx;
            responses[key] = value;

            var allButtons = document.querySelectorAll('[data-section-idx="' + sIdx + '"][data-item-idx="' + iIdx + '"]');
            for (var i = 0; i < allButtons.length; i++) {
                allButtons[i].className = 'option-btn flex-1 py-2.5 sm:py-3 px-3 sm:px-4 rounded-lg text-black text-sm sm:text-base font-semibold transition-all bg-gray-300 hover:bg-gray-400';
            }

            clickedBtn.className = 'option-btn selected flex-1 py-2.5 sm:py-3 px-3 sm:px-4 rounded-lg text-black text-sm sm:text-base font-semibold transition-all ' + color + ' ring-4 ring-offset-2 ring-indigo-300';

            updateProgress();
        }

        function updateProgress() {
            var count = Object.keys(responses).length;
            var percent = Math.round((count / totalItems) * 100);

            document.getElementById('progressText').textContent = count + ' / ' + totalItems;
            document.getElementById('progressPercent').textContent = percent;
            document.getElementById('progressBar').style.width = percent + '%';

            if (count === totalItems) {
                document.getElementById('incompleteBtn').classList.add('hidden');

                // âœ… Ù„Ùˆ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù…ÙØ¹Ù‘Ù„: ÙŠØ¸Ù‡Ø± Ø²Ø± Ø¥Ø±Ø³Ø§Ù„
                // âœ… Ù„Ùˆ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù…Ø¹Ø·Ù‘Ù„: ÙŠØ¸Ù‡Ø± Ø²Ø± Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ù…Ø¨Ø§Ø´Ø±Ø©
                if (ENABLE_RESULTS_EMAIL) {
                    document.getElementById('sendBtns').classList.remove('hidden');
                    document.getElementById('thankYouMessage').classList.add('hidden');
                    showToast('Ø§ÙƒØªÙ…Ù„Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© âœ…', 'info');
                } else {
                    document.getElementById('sendBtns').classList.add('hidden');
                    document.getElementById('thankYouMessage').classList.remove('hidden');
                    showToast('Ø§ÙƒØªÙ…Ù„Øª Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© âœ… (Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ù…ØªÙˆÙ‚Ù Ù…Ù† Ø§Ù„ÙƒÙˆØ¯)', 'info');
                }
            }
        }

        // âœ… ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø­Ø³Ø¨ Ø§Ù„Ù†Ø³Ø¨:
        // 85â€“100: Ù…Ù…ØªØ§Ø²
        // 70â€“84: Ø¬ÙŠØ¯ Ø¬Ø¯Ù‹Ø§
        // 50â€“69: Ù…ØªÙˆØ³Ø·
        // Ø£Ù‚Ù„ Ù…Ù† 50: Ø¶Ø¹ÙŠÙ
        function calculateResults() {
            var totalScore = 0;
            var sectionScores = [];

            for (var sIdx = 0; sIdx < sections.length; sIdx++) {
                var section = sections[sIdx];
                var sectionScore = 0;
                var sectionMax = section.items.length * 3;

                for (var iIdx = 0; iIdx < section.items.length; iIdx++) {
                    var key = sIdx + '-' + iIdx;
                    sectionScore += responses[key] || 0;
                }

                totalScore += sectionScore;
                var percentage = Math.round((sectionScore / sectionMax) * 100);

                sectionScores.push({
                    name: section.title,
                    score: sectionScore,
                    max: sectionMax,
                    percentage: percentage,
                    color: getPerformanceColor(percentage)
                });
            }

            var maxScore = totalItems * 3;          // âœ… 57
            var percentageAll = Math.round((totalScore / maxScore) * 100); // âœ… Ù†Ø³Ø¨Ø© Ù…Ù† 100

            var levelWord = '';
            var levelText = '';

            if (percentageAll >= 85) {
                levelWord = "Ù…Ù…ØªØ§Ø²";
                levelText = "Ù…Ù†Ø´Ø£ØªÙƒ Ù…ØªÙˆØ§ÙÙ‚Ø© Ø¨Ø¯Ø±Ø¬Ø© Ø¹Ø§Ù„ÙŠØ©";
            } else if (percentageAll >= 70) {
                levelWord = "Ø¬ÙŠØ¯ Ø¬Ø¯Ù‹Ø§";
                levelText = "Ø¨Ø¹Ø¶ Ø§Ù„ØªØ­Ø³ÙŠÙ†Ø§Øª Ù…Ø·Ù„ÙˆØ¨Ø©";
            } else if (percentageAll >= 50) {
                levelWord = "Ù…ØªÙˆØ³Ø·";
                levelText = "ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ ØªØ­Ø³ÙŠÙ†Ø§Øª ÙˆØ§Ø¶Ø­Ø©";
            } else {
                levelWord = "Ø¶Ø¹ÙŠÙ";
                levelText = "ÙŠÙ†ØµØ­ Ø¨Ø¥Ø¬Ø±Ø§Ø¡ Ø®Ø·Ø© Ù…ÙˆØ§Ø¡Ù…Ø© Ø´Ø§Ù…Ù„Ø©";
            }

            return {
                totalScore: totalScore,
                maxScore: maxScore,
                percentage: percentageAll,
                levelWord: levelWord,
                levelText: levelText,
                sectionScores: sectionScores
            };
        }

        function buildSurveyText(results) {
            var text = '';

            text += 'Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†Ø´Ø£Ø© ğŸ“Œ:\n';
            text += 'Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø´Ø£Ø©: ' + userInfo.name + '\n';
            text += 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ: ' + userInfo.email + '\n';
            text += 'Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„: ' + userInfo.phone + '\n';
            text += 'Ø§Ù„Ù…Ù†Ø·Ù‚Ø©: ' + userInfo.region + '\n';
            text += 'Ø­Ø¬Ù… Ø§Ù„Ù…Ù†Ø´Ø£Ø©: ' + userInfo.size + '\n\n';

            text += 'Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© ğŸ¯:\n';
            text += results.totalScore + ' Ù…Ù† ' + results.maxScore + ' (' + results.percentage + '%)\n';
            text += 'Ø§Ù„ØªÙ‚ÙŠÙŠÙ…: ' + results.levelWord + ' - ' + results.levelText + '\n\n';

            text += 'Ø§Ù„ØªÙØµÙŠÙ„ Ø­Ø³Ø¨ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… ğŸ“Š:\n';

            for (var sIdx = 0; sIdx < sections.length; sIdx++) {
                var section = sections[sIdx];
                text += '\n' + section.title + ':\n';

                for (var iIdx = 0; iIdx < section.items.length; iIdx++) {
                    var key = sIdx + '-' + iIdx;
                    var value = responses[key];
                    var valueText = '';

                    if (value === 3) valueText = 'Ù†Ø¹Ù… âœ…';
                    else if (value === 2) valueText = 'Ø¬Ø²Ø¦ÙŠÙ‹Ø§ ğŸ”„ï¸';
                    else if (value === 1) valueText = 'Ù„Ø§ âŒ';
                    else valueText = 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©';

                    text += '- ' + section.items[iIdx] + ' â†’ ' + valueText + '\n';
                }
            }

            return text;
        }

        function autoFillInfo() {
            // Ø¹Ø¯Ù‘Ù„ Ø§Ù„Ù‚ÙŠÙ… Ù‡Ø°ÙŠ Ø¹Ù„Ù‰ ÙƒÙŠÙÙƒ
            document.getElementById('facilityName').value  = 'Ù…Ø±ÙƒØ² ØªÙ…Ù‡ÙŠØ± Ù„Ù„ØªØ¯Ø±ÙŠØ¨';
            document.getElementById('email').value         = 'info@example.com';
            document.getElementById('phone').value         = '0500000000';
            document.getElementById('region').value        = 'Ø§Ù„Ø±ÙŠØ§Ø¶';
            document.getElementById('facilitySize').value  = 'Ù…ØªÙˆØ³Ø·Ø©';
        }

        function showResults() {
            var results = calculateResults();

            document.getElementById('surveyPage').classList.add('hidden');
            document.getElementById('resultsPage').classList.remove('hidden');
            applyTotalCardVisibility();

            // âœ… ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ù…Ù†Ø´Ø£Ø© (Ù†Ø³Ø¨Ø©/100)
            if (document.getElementById('gaugeValue')) document.getElementById('gaugeValue').textContent = results.percentage;
            if (document.getElementById('gaugeMax')) document.getElementById('gaugeMax').textContent = '100';
            if (document.getElementById('gaugeBadge')) document.getElementById('gaugeBadge').textContent = results.levelWord;
            if (document.getElementById('gaugeDesc')) document.getElementById('gaugeDesc').textContent = results.levelText;

            applyGaugeTheme(results.levelWord);
            updateGaugeById('gaugeFg', results.percentage);

            // âœ… Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠØ© (Ù†Ù‚Ø§Ø·/57) Ø¨Ø¯ÙˆÙ† %
            // âœ… Ù‡Ù†Ø§ ÙŠÙ†Ø­Ù„ Ø®Ø·Ø£ 36/19 (Ø§Ù„Ù€ 19 ÙƒØ§Ù†Øª Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©)
            if (document.getElementById('totalPointsValue')) document.getElementById('totalPointsValue').textContent = results.totalScore;
            if (document.getElementById('totalPointsMax')) document.getElementById('totalPointsMax').textContent = results.maxScore;

            // ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ù‚ÙˆØ³ Ø¨Ø­Ø³Ø¨ Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ (Ø¨Ø¯ÙˆÙ† Ø¹Ø±Ø¶ Ù†Ø³Ø¨Ø©)
            updateGaugeById('totalGaugeFg', results.percentage);

            var detailsDiv = document.getElementById('sectionDetails');
            detailsDiv.innerHTML = '';
            for (var i = 0; i < results.sectionScores.length; i++) {
                var section = results.sectionScores[i];
                var statusEmoji = section.percentage >= 80 ? 'ğŸŸ¢' : section.percentage >= 50 ? 'ğŸŸ¡' : 'ğŸ”´';
                detailsDiv.innerHTML += '<div class="bg-white rounded-lg p-3 sm:p-4 shadow"><h4 class="font-semibold text-sm sm:text-base text-gray-800 mb-1.5 sm:mb-2">'
                    + section.name + '</h4><div class="flex justify-between items-center"><span class="text-xl sm:text-2xl font-bold text-indigo-600">'
                    + section.score + ' / ' + section.max + '</span><span class="text-sm sm:text-lg font-semibold text-gray-600">'
                    + section.percentage + '% ' + statusEmoji + '</span></div><div class="w-full bg-gray-200 rounded-full h-1.5 sm:h-2 mt-1.5 sm:mt-2"><div class="h-1.5 sm:h-2 rounded-full transition-all" style="width: '
                    + section.percentage + '%; background-color: ' + section.color + '"></div></div></div>';
            }

            window.scrollTo(0, 0);
            showToast('ØªÙ… Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ© ğŸ¯', 'success');
        }

        
        // =========================
        // EmailJS Templates (Email)
        // =========================
        // âœ… Template Ø§Ù„Ù†ØªØ§Ø¦Ø¬ (Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø§Ø³ØªØ¨ÙŠØ§Ù†)
        const EMAILJS_SERVICE_ID = "service_v02rb8j";
        const EMAILJS_TEMPLATE_RESULTS_ID = "template_tthd4br"; // ØºÙŠÙ‘Ø±Ù‡Ø§ Ø¥Ø°Ø§ Ø³ÙˆÙŠØª Ù‚Ø§Ù„Ø¨ Ù†ØªØ§Ø¦Ø¬ Ø¬Ø¯ÙŠØ¯
        // âœ… Template Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø© (Ø·Ù„Ø¨ Ø§Ø³ØªØ´Ø§Ø±Ø©)
        const EMAILJS_TEMPLATE_CONSULTATION_ID = "template_gmjtovj"; // Ø­Ø· ID Ù‚Ø§Ù„Ø¨ Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø© Ù‡Ù†Ø§

        function _clamp(n, a, b) { return Math.max(a, Math.min(b, n)); }

        function levelEmoji(levelWord){
            if (levelWord === "Ù…Ù…ØªØ§Ø²") return "ğŸ†";
            if (levelWord === "Ø¬ÙŠØ¯ Ø¬Ø¯Ù‹Ø§") return "âœ…";
            if (levelWord === "Ù…ØªÙˆØ³Ø·") return "âš ï¸";
            return "âŒ";
        }

        function levelColor(levelWord){
            if (levelWord === "Ù…Ù…ØªØ§Ø²") return "#22c55e";
            if (levelWord === "Ø¬ÙŠØ¯ Ø¬Ø¯Ù‹Ø§") return "#16a34a";
            if (levelWord === "Ù…ØªÙˆØ³Ø·") return "#f59e0b";
            return "#ef4444";
        }


        // âœ… Ø«ÙŠÙ… Ø£Ù„ÙˆØ§Ù† Ø´Ø§Ø±Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ (EmailJS)
        // Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ Ù…Ø§ ÙŠØ´ØºÙ„ JS ÙˆÙ„Ø§ ÙŠØ¹Ø±Ù CSS Ù…Ù† Ù…ÙˆÙ‚Ø¹ÙƒØŒ ÙÙ†Ø¹Ø·ÙŠÙ‡ Ø§Ù„Ø£Ù„ÙˆØ§Ù† ÙƒÙ…ØªØºÙŠØ±Ø§Øª.
        function emailLevelBadgeTheme(levelWord){
            if (levelWord === "Ù…Ù…ØªØ§Ø²") {
                return { solid: "#16a34a", grad: "linear-gradient(90deg,#16a34a,#22c55e)" };
            }
            if (levelWord === "Ø¬ÙŠØ¯ Ø¬Ø¯Ù‹Ø§") {
                return { solid: "#22c55e", grad: "linear-gradient(90deg,#22c55e,#86efac)" };
            }
            if (levelWord === "Ù…ØªÙˆØ³Ø·") {
                return { solid: "#f59e0b", grad: "linear-gradient(90deg,#f59e0b,#fbbf24)" };
            }
            return { solid: "#dc2626", grad: "linear-gradient(90deg,#dc2626,#ef4444)" }; // Ø¶Ø¹ÙŠÙ
        }

        function emailTotalBadgeTheme(){
            // Ø«ÙŠÙ… Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ (Ø£Ø²Ø±Ù‚ -> Ø¨Ù†ÙØ³Ø¬ÙŠ Ù…Ø«Ù„ Ø§Ù„Ù‚ÙˆØ³ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø¹Ù†Ø¯Ùƒ)
            // solid ÙŠØ³ØªØ®Ø¯Ù… ÙƒÙ€ fallback Ù„Ùˆ Ø§Ù„Ø¹Ù…ÙŠÙ„ Ù…Ø§ ÙŠØ¯Ø¹Ù… Ø§Ù„ØªØ¯Ø±Ù‘Ø¬.
            return { solid: "#7c3aed", grad: "linear-gradient(90deg,#2563eb,#7c3aed)" };
        }

        // ØªÙˆÙ„ÙŠØ¯ ØµÙˆØ±Ø© Gauge Ù†ØµÙ Ø¯Ø§Ø¦Ø±Ø© (PNG) Ø¹Ø´Ø§Ù† ÙŠØ´ØªØºÙ„ ÙÙŠ Gmail/Outlook Ø¨Ø¯ÙˆÙ† Ø®Ø±Ø§Ø¨
        function makeHalfGaugeUrl(percent, fillColor) {
            percent = _clamp(Number(percent) || 0, 0, 100);

            const cfg = {
                type: "doughnut",
                data: {
                    datasets: [{
                        data: [percent, 100 - percent],
                        backgroundColor: [fillColor, "#e5e7eb"],
                        borderWidth: 0
                    }]
                },
                options: {
                    rotation: -Math.PI,
                    circumference: Math.PI,
                    cutout: "72%",
                    plugins: { legend: { display: false }, tooltip: { enabled: false } }
                }
            };

            return "https://quickchart.io/chart?c=" + encodeURIComponent(JSON.stringify(cfg)) +
                "&w=480&h=280&bkg=transparent&f=png&devicePixelRatio=1";
        }

    
        function sendEmailWithResults() {

            // âœ… Ø­Ù…Ø§ÙŠØ©: Ù„Ùˆ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ù…Ù‚ÙÙ‘Ù„ Ù…Ù† Ø§Ù„ÙƒÙˆØ¯
            if (!ENABLE_RESULTS_EMAIL) {
                showToast('Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… Ø¹Ø¨Ø± Ø§Ù„Ø¨Ø±ÙŠØ¯ Ù…ØªÙˆÙ‚Ù Ù…Ù† Ø§Ù„ÙƒÙˆØ¯', 'info');
                document.getElementById('sendBtns').classList.add('hidden');
                document.getElementById('thankYouMessage').classList.remove('hidden');
                return;
            }

            var results = calculateResults();
            var body = buildSurveyText(results);

            var showTotal = !!SHOW_TOTAL_CARD;

            // âœ… Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø´Ø§Ø±Ø§Øª Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¥ÙŠÙ…ÙŠÙ„ (ØªØªÙˆØ§ÙÙ‚ Ù…Ø¹ Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù‚ÙˆØ³ ÙˆØ§Ù„ØªÙ‚ÙŠÙŠÙ…)
            var lvlTheme = emailLevelBadgeTheme(results.levelWord);
            var totTheme = emailTotalBadgeTheme();

            var sendBtns = document.getElementById('sendBtns');
            sendBtns.classList.add('opacity-60');

            var templateParams = {
                subject: 'Ù†ØªØ§Ø¦Ø¬ Ø§Ø³ØªØ¨ÙŠØ§Ù† Ù…ÙˆØ§Ø¡Ù…Ø© Ø§Ù„Ù…Ù†Ø´Ø¢Øª - ' + userInfo.name,
                name: userInfo.name,
                email: userInfo.email,
                phone: userInfo.phone,
                region: userInfo.region,
                size: userInfo.size,
                message: body,

                total_display: showTotal ? 'inline-block' : 'none',

                total_score: (results.totalScore + ' / ' + results.maxScore),
                level_score: Math.round(results.percentage) + ' / 100',
                level_short: results.levelWord,
                level_note: results.levelText,
                level_emoji: levelEmoji(results.levelWord),

                // âœ… Ø´Ø§Ø±Ø© Ø§Ù„ØªÙ‚ÙŠÙŠÙ… (Ù„ÙˆÙ†/ØªØ¯Ø±Ù‘Ø¬) Ø¯Ø§Ø®Ù„ Ù‚Ø§Ù„Ø¨ EmailJS
                level_badge_bg: lvlTheme.solid,
                level_badge_bg_img: lvlTheme.grad,

                // âœ… Ø´Ø§Ø±Ø© Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ (Ù„ÙˆÙ†/ØªØ¯Ø±Ù‘Ø¬) Ø¯Ø§Ø®Ù„ Ù‚Ø§Ù„Ø¨ EmailJS
                total_badge_bg: totTheme.solid,
                total_badge_bg_img: totTheme.grad,

                total_gauge_url: makeHalfGaugeUrl(results.percentage, totTheme.solid),
                level_gauge_url: makeHalfGaugeUrl(results.percentage, levelColor(results.levelWord))
            };

            emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_RESULTS_ID, templateParams)
                .then(function(response) {
                    console.log("EmailJS SUCCESS!", response.status, response.text);
                    sendBtns.classList.add('hidden');
                    document.getElementById('thankYouMessage').classList.remove('hidden');
                    window.scrollTo(0, document.body.scrollHeight);
                    showToast('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø¨Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ Ø¨Ù†Ø¬Ø§Ø­ âœ…', 'success');
                }, function(error) {
                    console.error("EmailJS FAILED...", error);
                    alert("Ø­ØµÙ„ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø¹Ø¨Ø± EmailJS.\n\nØªÙØ§ØµÙŠÙ„: " + (error.text || ''));
                    sendBtns.classList.remove('opacity-60');
                    showToast('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ âš ï¸', 'error');
                });
        }

        function sendConsultationRequest() {
            // Ù…Ù†Ø¹ Ø§Ù„ØªÙƒØ±Ø§Ø±
            if (consultationSent) {
                showToast('ØªÙ… ØªÙ†ÙÙŠØ° Ø§Ù„Ø·Ù„Ø¨ Ù…Ø³Ø¨Ù‚Ø§Ù‹ âœ…', 'info');
                return;
            }

            // ØªØ£ÙƒØ¯ Ø£Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†Ø´Ø£Ø© Ù…ÙˆØ¬ÙˆØ¯Ø©
            if (!userInfo || !userInfo.name) {
                showToast('ÙŠØ±Ø¬Ù‰ ØªØ¹Ø¨Ø¦Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†Ø´Ø£Ø© Ø£ÙˆÙ„Ø§Ù‹', 'error');
                return;
            }

            // ÙˆØ¶Ø¹ Ø§Ù„Ø¹Ù„Ù… Ù…Ø¨Ø§Ø´Ø±Ø© Ù„Ù…Ù†Ø¹ Ø§Ù„Ø¶ØºØ·Ø§Øª Ø§Ù„Ù…ØªÙƒØ±Ø±Ø©
            consultationSent = true;

            // ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ø²Ø±
            var btn = document.getElementById('consultationBtn');
            if (btn) {
                btn.disabled = true;
                btn.classList.add('opacity-60', 'cursor-not-allowed');
            }

            // ØªØ¹Ø¨Ø¦Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†Ø´Ø£Ø© ÙÙŠ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„
            document.getElementById('contactFacilityName').textContent = userInfo.name || '-';
            document.getElementById('contactEmail').textContent       = userInfo.email || '-';
            document.getElementById('contactPhone').textContent       = userInfo.phone || '-';
            document.getElementById('contactRegion').textContent      = userInfo.region || '-';
            document.getElementById('contactSize').textContent        = userInfo.size || '-';

            // ØªØ¬Ù‡ÙŠØ² Ù†ØµÙˆØµ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ù„Ù„Ø­Ø§Ù„Ø© "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„"
            document.getElementById('consultationTitle').textContent = 'Ø¬Ø§Ø±ÙŠ Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø© â³';
            document.getElementById('consultationDesc').textContent  = 'ÙŠØªÙ… Ø§Ù„Ø¢Ù† Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø©ØŒ ÙˆÙ‡Ø°Ù‡ Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù†Ø´Ø£ØªÙƒ:';

            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ ÙÙˆØ±Ù‹Ø§ Ø¨Ø¯ÙˆÙ† Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø±Ø¯
            var modal = document.getElementById('contactModal');
            modal.classList.remove('hidden');
            modal.classList.add('flex');

            // ØªØ¬Ù‡ÙŠØ² Ù†Øµ Ø§Ù„Ø¨Ø±ÙŠØ¯: Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†Ø´Ø£Ø© ÙÙ‚Ø·
            var body = '';
            body += 'ğŸ“Œ Ø·Ù„Ø¨ Ø§Ø³ØªØ´Ø§Ø±Ø© Ù…ÙˆØ§Ø¡Ù…Ø©\n\n';
            body += 'ğŸ“Œ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ù†Ø´Ø£Ø©:\n';
            body += 'Ø§Ø³Ù… Ø§Ù„Ù…Ù†Ø´Ø£Ø©: ' + (userInfo.name || '') + '\n';
            body += 'Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ: ' + (userInfo.email || '') + '\n';
            body += 'Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„: ' + (userInfo.phone || '') + '\n';
            body += 'Ø§Ù„Ù…Ù†Ø·Ù‚Ø©: ' + (userInfo.region || '') + '\n';
            body += 'Ø­Ø¬Ù… Ø§Ù„Ù…Ù†Ø´Ø£Ø©: ' + (userInfo.size || '') + '\n';

            var templateParams = {
                subject: 'Ø·Ù„Ø¨ Ø§Ø³ØªØ´Ø§Ø±Ø© Ø´Ù‡Ø§Ø¯Ø© Ù…ÙˆØ§Ø¡Ù…Ø© - ' + userInfo.name,
                name: userInfo.name,
                email: userInfo.email,
                phone: userInfo.phone,
                region: userInfo.region,
                size: userInfo.size,
                message: body
            };

            // âœ… Ù„Ø§Ø²Ù… ØªØ³ÙˆÙŠ Ù‚Ø§Ù„Ø¨ EmailJS Ù…Ø³ØªÙ‚Ù„ Ù„Ù„Ø§Ø³ØªØ´Ø§Ø±Ø© ÙˆØªØ­Ø· ID Ù‡Ù†Ø§
            if (EMAILJS_TEMPLATE_CONSULTATION_ID === "PUT_CONSULT_TEMPLATE_ID_HERE") {
                showToast('Ø­Ø· Template ID Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø© Ø¯Ø§Ø®Ù„ index.html (EMAILJS_TEMPLATE_CONSULTATION_ID)', 'info');
                consultationSent = false;
                if (btn) {
                    btn.disabled = false;
                    btn.classList.remove('opacity-60', 'cursor-not-allowed');
                }
                return;
            }

            // Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ ÙŠØªÙ… ÙÙŠ Ø§Ù„Ø®Ù„ÙÙŠØ©
            emailjs.send(EMAILJS_SERVICE_ID, EMAILJS_TEMPLATE_CONSULTATION_ID, templateParams)
                .then(function(response) {
                    console.log("Consultation Email SUCCESS!", response.status, response.text);
                    showToast('ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø© Ø¨Ù†Ø¬Ø§Ø­ âœ…', 'success');

                    // ØªØ­Ø¯ÙŠØ« Ù†ØµÙˆØµ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ø¨Ø¹Ø¯ Ù†Ø¬Ø§Ø­ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
                    document.getElementById('consultationTitle').textContent = 'ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø© âœ…';
                    document.getElementById('consultationDesc').textContent  = 'Ø³ÙŠØªÙ… Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ÙƒÙ… Ù‚Ø±ÙŠØ¨Ù‹Ø§ Ø¹Ø¨Ø± Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„ Ø§Ù„Ù…Ø³Ø¬Ù„Ø©:';
                }, function(error) {
                    console.error("Consultation Email FAILED...", error);
                    alert("Ø­ØµÙ„ Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø© Ø¹Ø¨Ø± EmailJS.\n\nØªÙØ§ØµÙŠÙ„: " + (error.text || ''));
                    showToast('Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ØŒ Ø­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ âš ï¸', 'error');

                    // ÙÙŠ Ø­Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ Ù†Ø³Ù…Ø­ Ø¨Ù…Ø­Ø§ÙˆÙ„Ø© Ø¬Ø¯ÙŠØ¯Ø©
                    consultationSent = false;
                    if (btn) {
                        btn.disabled = false;
                        btn.classList.remove('opacity-60', 'cursor-not-allowed');
                    }

                    // ØªÙˆØ¶ÙŠØ­ Ø§Ù„Ø­Ø§Ù„Ø© ÙÙŠ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ Ø¹Ù†Ø¯ Ø­Ø¯ÙˆØ« Ø®Ø·Ø£
                    document.getElementById('consultationTitle').textContent = 'Ù„Ù… ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø·Ù„Ø¨ Ø§Ù„Ø§Ø³ØªØ´Ø§Ø±Ø© âš ï¸';
                    document.getElementById('consultationDesc').textContent  = 'Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ØŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.';
                });
        }

        function closeContactModal() {
            var modal = document.getElementById('contactModal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }

        function resetSurvey() {
            userInfo = {};
            responses = {};
            document.getElementById('resultsPage').classList.add('hidden');
            document.getElementById('infoPage').classList.remove('hidden');
            document.getElementById('facilityName').value = '';
            document.getElementById('email').value = '';
            document.getElementById('phone').value = '';
            document.getElementById('region').value = '';
            document.getElementById('facilitySize').value = '';
            document.getElementById('infoError').classList.add('hidden');
            document.getElementById('emailError').classList.add('hidden');
            document.getElementById('phoneError').classList.add('hidden');
            document.getElementById('email').classList.remove('border-red-500');
            document.getElementById('phone').classList.remove('border-red-500');
            document.getElementById('progressText').textContent = '0 / ' + totalItems;
            document.getElementById('progressPercent').textContent = '0';
            document.getElementById('progressBar').style.width = '0%';
            document.getElementById('incompleteBtn').classList.remove('hidden');
            document.getElementById('sendBtns').classList.add('hidden');
            document.getElementById('sendBtns').classList.remove('opacity-60');
            document.getElementById('thankYouMessage').classList.add('hidden');

            // âœ… ØªØµÙÙŠØ± Ø£Ù‚ÙˆØ§Ø³ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
            if (document.getElementById('gaugeValue')) document.getElementById('gaugeValue').textContent = '0';
            if (document.getElementById('gaugeBadge')) document.getElementById('gaugeBadge').textContent = '-';
            if (document.getElementById('gaugeDesc')) document.getElementById('gaugeDesc').textContent = '-';

            if (document.getElementById('totalPointsValue')) document.getElementById('totalPointsValue').textContent = '0';
            if (document.getElementById('totalPointsMax')) document.getElementById('totalPointsMax').textContent = '0';

            updateGaugeById('gaugeFg', 0);
            updateGaugeById('totalGaugeFg', 0);
            applyTotalCardVisibility();

            // Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø·Ù„Ø¨ Ø§Ø³ØªØ´Ø§Ø±Ø© Ø¬Ø¯ÙŠØ¯ Ø¨Ø¹Ø¯ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§Ø³ØªØ¨ÙŠØ§Ù†
            consultationSent = false;
            var btn = document.getElementById('consultationBtn');
            if (btn) {
                btn.disabled = false;
                btn.classList.remove('opacity-60', 'cursor-not-allowed');
            }

            // Ø±Ø¬ÙˆØ¹ Ù„Ù„Ø£Ø¹Ù„Ù‰
            window.scrollTo(0, 0);
        }

    </script>
</body>
</html>
